# Extensible Markup Language (XML)
Derived from SGML (Standard Generalized Markup Language). Used to store and transport data that is both human-readable and machine-parsable.

## Syntax 
Similar to HTML data is nested within tags and can contain attributes.

```
<user id="1">
    <name>John</name>
    <age>30</age>
    <address>
        <street>123 main st</street>
        <city>Ottawa</city>
    </address>
</user>
```

## Extensible Stylesheet Language Transformations (XSLT)
Used for data transformation and formatting.

## XML External Entities Attacks (XXE)
XSLT can be used in an XXE attack via
1. Data Extraction
A stylesheet can extract user credentials

2. Entity Expansion
XSLT can expand entities defined in the the XML document. (Including external) 

3. Data Manipulation
Modify data to discover more vulnerabilities.

## Document Type Definitions (DTD)
Define the structure of an XML document.

- allowed elements
- attributes
- validation

```html
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE config [
<!ElEMENT config (database)>
<!ELEMENT database (username, password)>
<!ELEMENT username (#PCDATA)>
<!ELEMENT password (#PCDATA)>
]>


<config>
<!-- configuration data -->
</config>
```

### XXE DTD

1. Internal Entities
Essentially a variable declaration to re-use data on the page.
```html
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE note [
<!ENTITY internalvar "This is a test">
]>
<note>
    <info>&internalvar;</info>
</note>
```

2. External Entities
This can be used to retrieve files from a remote server or locally.

```html
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE config [
<!ENTITY external SYSTEM "http://evil.ca">
]>
<config>
&external;
</config>
```

3. Parameter Entities
Define reusable structures or to include DTD subsets.
```xml
<!DOCTYPE note [
<!ENTITY % common "CDATA">
<!ELEMENT name (%common;)>
]>
<note>
    <name>John</name>
</note>
```

4.  Character Entities
This should be familiar from html. `&lt;` etc.
