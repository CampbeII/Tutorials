# What's your name
A tryhackme box.

## 1. Run Nmap
Discover the available ports:

| Port | Service |
| ---- | ------- |
| 22 | SSH |
| 80 | HTTP |
| 8081 | BlackIce |

```sh
nmap -sS -pN -p- "$ip" -oA results
```

### 2. Fuzz
I used the SecLists directory-list-2.3-medium.txt. This will uncover the following directories:

1. `/public`
2. `/api`
3. `/phpmyadmin`
3. `/js`

## 3. Examine Javascript Files
`/js` contains multiple files that are used to perform api actions.

### Admin.js
Sends `POST` requests to the following endpoints:
- ../../api/add_post.php
- ../../api/edit_post.php
- ../../api/delete_post.php

### Dashboard.js
GET request sent to 
- ../../api/posts.php
- Vulnerable `innerHTML` function call
- Receives title, content, username

### Login.js
- POST to ../../api/login.php
- A redirect that will send the user to either `admin.php` or `dashboard.php` depending on the `role` contained in the json response.

- Need to find a way to elevate to this role or access thet admin page.

### Logout.js
Not much interesting here
- POST to ../../api/logout.php

### Mod.js
- ../../api/mod.php
- Possibility to alter this endpoint: `actionLink.href = ../../../api/mod_update.php?userId=${user.id}`

### Register.js
- ../../api/register.js
- Exposed API key 


```sh
gobuster dir -u "$url" -w "$wordlist"
```

## 4. Register a new user
```sh
register()
{
    curl -sL -H "Content-Type: application/json" -H "X-THM-API-Key: e8d25b4208b80008a9e15c8698640e85" "$url/api/register.php" -d "{\"username\":\"$1\",\"password\":\"$2\",\"email\":\"$3\",\"name\":\"$4\"}"
}
register test test test@test.com test
```

I left off trying to see if I could expose or use SQL injection to determine my userid
